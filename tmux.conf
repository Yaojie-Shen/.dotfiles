# Getting colors in tmux
set -g default-terminal "screen-256color"

set -g mouse on

# Set window and panel index to start at 1
set -g base-index 1
setw -g pane-base-index 1

# Beautify status bar
set-option -g status-bg black
set-option -g status-fg white
set-option -g status-left-style bold
set-option -g status-right '#H | %Y-%m-%d %H:%M'

# Show system resource info (CPU, GPU, MEM) in the tmux status bar
set -g status-right 'CPU: #(top -bn1 | grep "Cpu(s)" | awk "{print \$2 + \$4}")% | #( \
if command -v nvidia-smi > /dev/null 2>&1; then \
  GPU_LOAD=$(nvidia-smi --query-gpu=utilization.gpu --format=csv,noheader,nounits | head -n1 | grep -E "^[0-9]+$"); \
  if [ -n "$GPU_LOAD" ]; then \
    echo "GPU: ${GPU_LOAD}%"; \
  else \
    echo "GPU: N/A"; \
  fi; \
else \
  echo "GPU: N/A"; \
fi) | MEM: #(free -m | awk "/Mem:/ { printf(\"%3.1f%%\", \$3/\$2*100) }") | %Y-%m-%d %H:%M'
# Refresh status bar every 2 seconds
set -g status-interval 2
# Expand status-right display width to avoid text truncation
set -g status-right-length 60
